<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <title>windows service的C&#43;&#43;封装实现</title>

  
  
  <link rel="stylesheet" href="http://shell909090.org/css/hugo-octopress.css">

  
  

  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  
  <link href="http://shell909090.org/favicon.png" rel="icon">

  
  
  

  

  <meta name="description" content="">
  <meta name="keywords" content="">

  <meta name="author" content="">

  
  <meta name="generator" content="Hugo 0.17-DEV" />

  
  
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-48816091-1', 'auto');
ga('send', 'pageview');
</script>


</head>
<body>


<header role="banner"><hgroup>
  
  <h1><a href="http://shell909090.org/">Shell&#39;s Home</a></h1>
    <h2></h2>
</hgroup></header>


<nav role="navigation">

<ul class="main-navigation">
  
  
</ul>


<ul class="subscription">
  

  
  

</ul>


</nav>


<div id="main">
  <div id="content">
    <div>
      <article class="hentry" role="article">

        
        

<header>
    <h1 class="entry-title">
         windows service的C&#43;&#43;封装实现 
    </h1>
    <p class="meta">Dec 20, 2006
         - 6 minute read 
         - <a href="http://shell909090.org/blog/archives/338/#disqus_thread">Comments</a>

        
    </p>
</header>


        <div class="entry-content">
          
          
          
          <div>

   
windows系统服务入口的封装类，service是基类，service\_manager是管理类。支持UNICODE，可以多服务封装在一个程序里面，过程当然都是自动的。拥有自动防错系统，在服务异常退出的时候会去关闭服务，而不是开着服务直接没了进程。写一个类，继承service，然后在哪里出一个实例，就可以了。service中有很多虚函数，可以重载了监听对应事件(我应该写的比较明白吧)。 get\_service\_name，返回UNICODE的字符串指针，定义服务名称。注意是纯虚函数，必须实现。get\_dependence，也是返回UNICODE的字符指针。指明这个服务依赖什么服务。get\_service\_type返回服务类型，其实也就是是否可以交互。get\_contral\_accepts，支持的信号(例如是否可以暂停)，默认可以暂停。on\_start开始时候调用的函数，下同。

</div>

<div>

使用方法

</div>

<div>

<div>

\#include\
\#include "service.h"

</div>

<div>

class test\_service : public service{\
public:\
 virtual LPTSTR get\_service\_name ();\
 virtual DWORD   on\_start (DWORD argc, LPTSTR \* argv);\
 virtual DWORD   on\_stop ();\
 virtual DWORD   on\_shutdown ();\
};

</div>

<div>

LPTSTR test\_service::get\_service\_name ()\
{\
 return \_T ("test\_service");\
}

</div>

<div>

DWORD test\_service::on\_start (DWORD argc, LPTSTR \* argv)\
{\
 return service::on\_start (argc, argv);\
}

</div>

<div>

DWORD test\_service::on\_stop ()\
{\
 return service::on\_stop ();\
}

</div>

<div>

DWORD test\_service::on\_shutdown ()\
{\
 return service::on\_shutdown ();\
}

</div>

<div>

int \_tmain (int argc, \_TCHAR \* argv\[\])\
{\
 test\_service ts;

</div>

<div>

 if (argc == 1)\
  service\_manager::start ();\
 else if (!\_tcscmp (argv\[1\], \_T ("install")))\
  service\_manager::install\_services (NULL, false);\
 else if (!\_tcscmp (argv\[1\], \_T ("remove")))\
  service\_manager::remove\_services (NULL);

</div>

<div>

 return 0;\
}

</div>

<p></div></p>

<div>

------------service.h-------------------

</div>

<div>

\#include\
using namespace std;

</div>

<div>

\#include\
\#pragma comment(lib, "psapi")

</div>

<div>

typedef         basic\_string &lt; TCHAR &gt; tstring;

</div>

<div>

\#ifndef \_SERVICE\_H\_\
\#define \_SERVICE\_H\_

</div>

<div>

class           service {\
  public:\
 service ();\
 \~service ();\
 virtual LPTSTR get\_service\_name () = 0;\
 virtual LPTSTR get\_dependence ();\
 virtual DWORD   get\_service\_type ();\
 virtual DWORD   get\_contral\_accepts ();\
 virtual DWORD   on\_start (DWORD argc, LPTSTR \* argv);\
 virtual DWORD   on\_stop ();\
 virtual DWORD   on\_interrogate ();\
 virtual DWORD   on\_pause ();\
 virtual DWORD   on\_continue ();\
 virtual DWORD   on\_shutdown ();

</div>

<div>

 void   pre\_start (SERVICE\_STATUS\_HANDLE hServiceStatus,\
          DWORD argc, LPTSTR \* argv);\
 BOOL            SetServiceStatus (DWORD dwState);\
  protected:\
 SERVICE\_STATUS\_HANDLE hServiceStatus;\
 SERVICE\_STATUS  ServiceStatus;\
};

</div>

<div>

class           service\_manager {\
  public:\
 service\_manager ();\
 \~service\_manager ();\
 DWORD     register\_service (service \* s);\
 DWORD     unregister\_service (service \* s);\
 LPSERVICE\_TABLE\_ENTRY get\_service\_entries ();\
 service       \*get\_service (LPCTSTR lpName);\
 static service\_manager \*get\_service\_manager();\
 static int    install\_services (LPCTSTR lpServiceName, bool
autostart);\
 static int    remove\_services (LPCTSTR lpServiceName);\
 static int    start();\
 static void WINAPI  service\_start (DWORD argc, LPTSTR \* argv);\
 static DWORD WINAPI  ctrl\_handler (DWORD dwControl, DWORD
dwEventType,\
           LPVOID lpEventData, LPVOID lpContext);\
 static TCHAR     \*service\_status\_name\[\];\
  protected:\
 static service\_manager \*this\_for\_static;\
 vector &lt; service \* &gt; service\_list;\
};

</div>

<div>

\#endif //\_SERVICE\_H\_

</div>

<div>

----------------------------------------

</div>

<div>

------------service.cpp-----------------

</div>

<div>

// service.cpp : 定义控制台应用程序的入口点。\
//

</div>

<div>

\#include "stdafx.h"

</div>

<div>

\#define PRINTERROR(x) \_tprintf (\_T ("%s failed, errorcode 0x%0.8Xn"),
(x), GetLastError ())

</div>

<div>

service\_manager \*service\_manager::this\_for\_static = NULL;\
TCHAR          \*service\_manager::service\_status\_name\[\] = {\
 \_T ("SERVICE\_UNKNOWN"),\
 \_T ("SERVICE\_STOPPED"),\
 \_T ("SERVICE\_START\_PENDING"),\
 \_T ("SERVICE\_STOP\_PENDING"),\
 \_T ("SERVICE\_RUNNING"),\
 \_T ("SERVICE\_CONTINUE\_PENDING"),\
 \_T ("SERVICE\_PAUSE\_PENDING"),\
 \_T ("SERVICE\_PAUSED")\
};

</div>

<div>

service::service ()\
{\
 if (service\_manager::get\_service\_manager () == NULL)\
  new             service\_manager ();\
 service\_manager::get\_service\_manager ()-&gt;register\_service
(this);\
}

</div>

<div>

service::\~service ()\
{\
 if (service\_manager::get\_service\_manager () == NULL)\
  return;\
 service\_manager::get\_service\_manager ()-&gt;unregister\_service
(this);\
}

</div>

<div>

LPTSTR service::get\_dependence ()\
{\
 return NULL;\
}

</div>

<div>

DWORD service::get\_service\_type ()\
{\
 return 0;\
}

</div>

<div>

DWORD service::get\_contral\_accepts ()\
{\
 return SERVICE\_ACCEPT\_PAUSE\_CONTINUE | SERVICE\_ACCEPT\_SHUTDOWN |\
  SERVICE\_ACCEPT\_STOP;\
}

</div>

<div>

DWORD service::on\_start (DWORD argc, LPTSTR \* argv)\
{\
 return SERVICE\_RUNNING;\
}

</div>

<div>

DWORD service::on\_stop ()\
{\
 return SERVICE\_STOPPED;\
}

</div>

<div>

DWORD service::on\_interrogate ()\
{\
 return SERVICE\_RUNNING;\
}

</div>

<div>

DWORD service::on\_pause ()\
{\
 return SERVICE\_PAUSED;\
}

</div>

<div>

DWORD service::on\_continue ()\
{\
 return SERVICE\_RUNNING;\
}

</div>

<div>

DWORD service::on\_shutdown ()\
{\
 return SERVICE\_STOPPED;\
}

</div>

<div>

void service::pre\_start (SERVICE\_STATUS\_HANDLE hServiceStatus,\
       DWORD argc, LPTSTR \* argv)\
{\
 this-&gt;hServiceStatus = hServiceStatus;\
 ServiceStatus.dwServiceType = SERVICE\_WIN32;\
 ServiceStatus.dwCurrentState = SERVICE\_START\_PENDING;\
 ServiceStatus.dwControlsAccepted = 0;\
 ServiceStatus.dwWin32ExitCode = 0;\
 ServiceStatus.dwServiceSpecificExitCode = 0;\
 ServiceStatus.dwCheckPoint = 0;\
 ServiceStatus.dwWaitHint = 10000;\
 SetServiceStatus (0);

</div>

<div>

 ServiceStatus.dwCurrentState = on\_start (argc, argv);

</div>

<div>

 if (ServiceStatus.dwCurrentState == SERVICE\_STOPPED)\
  ServiceStatus.dwWin32ExitCode = ServiceStatus.dwCurrentState;\
 ServiceStatus.dwCheckPoint = 0;\
 ServiceStatus.dwWaitHint = 0;\
 ServiceStatus.dwControlsAccepted = get\_contral\_accepts ();\
 SetServiceStatus (0);\
 return;\
}

</div>

<div>

BOOL service::SetServiceStatus (DWORD dwState)\
{\
 TCHAR lpOutString\[0x400\];\
 if (dwState != 0)\
  ServiceStatus.dwCurrentState = dwState;\
 if (ServiceStatus.dwCurrentState &gt; 7)\
  return 0;\
 BOOL rslt =::SetServiceStatus (hServiceStatus, &ServiceStatus);\
 if (rslt)\
  \_stprintf (lpOutString,\
       \_T ("%s set service status %s successed.n"),\
       get\_service\_name (),\
       service\_manager::service\_status\_name\[ServiceStatus.\
              dwCurrentState\]);\
 else\
  \_stprintf (lpOutString,\
       \_T\
       ("%s set service status %s failed, errorcode 0x%0.8Xn"),\
       get\_service\_name (),\
       service\_manager::service\_status\_name\[ServiceStatus.\
              dwCurrentState\],\
       GetLastError ());\
 OutputDebugString ((LPCTSTR) lpOutString);\
 return rslt;\
}

</div>

<div>

service\_manager::service\_manager ()\
{\
 if (this\_for\_static != NULL)\
  return;\
 this\_for\_static = this;\
}

</div>

<div>

service\_manager::\~service\_manager ()\
{\
 this\_for\_static = NULL;\
}

</div>

<div>

DWORD service\_manager::register\_service (service \* s)\
{\
 vector &lt; service \* &gt;::iterator iter;\
 iter = service\_list.begin ();\
 for (; iter != service\_list.end (); iter++)\
  if (\*iter == s)\
   return 1;\
 service\_list.push\_back (s);\
 return 0;\
}

</div>

<div>

DWORD service\_manager::unregister\_service (service \* s)\
{\
 vector &lt; service \* &gt;::iterator iter;\
 iter = service\_list.begin ();\
 for (; iter != service\_list.end (); iter++)\
  if (\*iter == s) {\
   service\_list.erase (iter);\
   return 0;\
  }\
 return -1;\
}

</div>

<div>

LPSERVICE\_TABLE\_ENTRY service\_manager::get\_service\_entries ()\
{\
 UINT i;\
 LPSERVICE\_TABLE\_ENTRY lte = NULL;

</div>

<div>

 lte = new SERVICE\_TABLE\_ENTRY\[service\_list.size () + 1\];\
 for (i = 0; i &lt; service\_list.size (); i++) {\
  lte\[i\].lpServiceName = service\_list\[i\]-&gt;get\_service\_name
();\
  lte\[i\].lpServiceProc = (LPSERVICE\_MAIN\_FUNCTION) service\_start;\
 }\
 lte\[i\].lpServiceName = NULL;\
 lte\[i\].lpServiceProc = NULL;

</div>

<div>

 return lte;\
}

</div>

<div>

service        \*service\_manager::get\_service (LPCTSTR lpName)\
{\
 for (UINT i = 0; i &lt; service\_list.size (); i++)\
  if (!\_tcscmp (service\_list\[i\]-&gt;get\_service\_name (), lpName))\
   return service\_list\[i\];\
 return NULL;\
}

</div>

<div>

int service\_manager::install\_services (LPCTSTR lpServiceName, bool
autostart)\
{\
 UINT i;\
 int rslt = 0;\
 DWORD service\_type;\
 TCHAR binary\_path\[0x400\];\
 SC\_HANDLE hSCManager = NULL, hService = NULL;\
 service        \*pservice;

</div>

<div>

 if (lpServiceName == NULL) {\
  for (i = 0; i &lt; this\_for\_static-&gt;service\_list.size (); i++)\
   install\_services (this\_for\_static-&gt;service\_list\[i\]-&gt;\
         get\_service\_name (), autostart);\
  return 0;\
 }\
 pservice = this\_for\_static-&gt;get\_service (lpServiceName);\
 if (pservice == NULL) {\
  \_tprintf (\_T ("get\_service %s failed, don't have this servicen"),\
      lpServiceName);\
  return -1;\
 }\
 if (!GetModuleFileNameEx (GetCurrentProcess (), NULL, binary\_path,
0x400)) {\
  PRINTERROR (\_T ("GetModuleFileNameEx"));\
  return -1;\
 }\
 if (this\_for\_static-&gt;service\_list.size () &lt; 2)\
  service\_type = SERVICE\_WIN32\_OWN\_PROCESS;\
 else\
  service\_type = SERVICE\_WIN32\_SHARE\_PROCESS;

</div>

<div>

\
 \_\_try {\
  hSCManager = OpenSCManager (NULL, NULL, SC\_MANAGER\_ALL\_ACCESS);\
  if (hSCManager == NULL) {\
   rslt = -1;\
   \_\_leave;\
  }

</div>

<div>

  hService = CreateService (hSCManager, lpServiceName, lpServiceName,\
          SC\_MANAGER\_ALL\_ACCESS,\
          pservice-&gt;\
          get\_service\_type () | service\_type,\
          (autostart ? SERVICE\_AUTO\_START :\
           SERVICE\_DEMAND\_START),\
          SERVICE\_ERROR\_NORMAL, binary\_path, NULL,\
          NULL, pservice-&gt;get\_dependence (), NULL,\
          NULL);\
  if (hService == NULL) {\
   rslt = -2;\
   \_\_leave;\
  }\
 }\
 \_\_finally {\
  if (hService != NULL)\
   CloseServiceHandle (hService);\
  if (hSCManager != NULL)\
   CloseServiceHandle (hSCManager);\
  if (rslt == 0)\
   \_tprintf (\_T ("install\_services %s successedn"), lpServiceName);\
  if (rslt == -1)\
   PRINTERROR (\_T ("OpenSCManager"));\
  if (rslt == -2)\
   PRINTERROR (\_T ("CreateService"));\
 }\
 return rslt;\
}

</div>

<div>

int service\_manager::remove\_services (LPCTSTR lpServiceName)\
{\
 int rslt = 0;\
 UINT i;\
 SC\_HANDLE hSCManager, hService;\
 service        \*pservice;

</div>

<div>

 if (lpServiceName == NULL) {\
  for (i = 0; i &lt; this\_for\_static-&gt;service\_list.size (); i++)\
   remove\_services (this\_for\_static-&gt;service\_list\[i\]-&gt;\
        get\_service\_name ());\
  return 0;\
 }\
 pservice = this\_for\_static-&gt;get\_service (lpServiceName);\
 if (pservice == NULL) {\
  \_tprintf (\_T ("get\_service failed, don't have this servicen"));\
  return -1;\
 }

</div>

<div>

 \_\_try {\
  hSCManager = OpenSCManager (NULL, NULL, SC\_MANAGER\_ALL\_ACCESS);\
  if (hSCManager == NULL) {\
   rslt = -1;\
   \_\_leave;\
  }\
  hService =\
   OpenService (hSCManager, lpServiceName, SC\_MANAGER\_ALL\_ACCESS);\
  if (hService == NULL) {\
   rslt = -2;\
   \_\_leave;\
  }\
  if (!DeleteService (hService)) {\
   rslt = -3;\
   \_\_leave;\
  }\
 }\
 \_\_finally {\
  if (hService != NULL)\
   CloseServiceHandle (hService);\
  if (hSCManager != NULL)\
   CloseServiceHandle (hSCManager);\
  if (rslt == 0)\
   \_tprintf (\_T ("remove\_services %s successedn"), lpServiceName);\
  if (rslt == -1)\
   PRINTERROR (\_T ("OpenSCManager"));\
  if (rslt == -2)\
   PRINTERROR (\_T ("OpenService"));\
  if (rslt == -3)\
   PRINTERROR (\_T ("DeleteService"));\
 }\
 return rslt;\
}

</div>

<div>

int service\_manager::start ()\
{\
 if (!StartServiceCtrlDispatcher
(this\_for\_static-&gt;get\_service\_entries ()))\
  OutputDebugString (\_T ("StartServiceCtrlDispatcher failedn"));\
 return 0;\
}

</div>

<div>

void WINAPI service\_manager::service\_start (DWORD argc, LPTSTR \*
argv)\
{\
 SERVICE\_STATUS\_HANDLE hServiceStatus;\
 service        \*pservice = this\_for\_static-&gt;get\_service
(argv\[0\]);\
 if (pservice == NULL) {\
  OutputDebugString (\_T\
         ("get\_service failed, don't have this servicen"));\
  return;\
 }

</div>

<div>

 hServiceStatus =\
  RegisterServiceCtrlHandlerEx (argv\[0\], ctrl\_handler, (LPVOID)\
           pservice);\
 if (hServiceStatus == NULL) {\
  OutputDebugString (\_T ("RegisterServiceCtrlHandlerEx return
NULLn"));\
  return;\
 }

</div>

<div>

 \_\_try {\
  pservice-&gt;pre\_start (hServiceStatus, argc, argv);\
 }\
 \_\_except (EXCEPTION\_EXECUTE\_HANDLER) {\
  pservice-&gt;SetServiceStatus (SERVICE\_STOPPED);\
 }\
 return;\
}

</div>

<div>

DWORD WINAPI service\_manager::ctrl\_handler (DWORD dwControl,\
           DWORD dwEventType,\
           LPVOID lpEventData,\
           LPVOID lpContext)\
{\
 DWORD status;\
 service        \*pservice = (service \*) lpContext;

</div>

<div>

 SetLastError (NO\_ERROR);\
 \_\_try {\
  switch (dwControl) {\
  case SERVICE\_CONTROL\_STOP:\
   status = pservice-&gt;on\_stop ();\
   break;\
  case SERVICE\_CONTROL\_SHUTDOWN:\
   status = pservice-&gt;on\_shutdown ();\
   break;\
  case SERVICE\_CONTROL\_PAUSE:\
   status = pservice-&gt;on\_pause ();\
   break;\
  case SERVICE\_CONTROL\_INTERROGATE:\
   status = pservice-&gt;on\_interrogate ();\
   break;\
  case SERVICE\_CONTROL\_CONTINUE:\
   status = pservice-&gt;on\_continue ();\
   break;\
  default:\
   return GetLastError ();\
  }\
  pservice-&gt;SetServiceStatus (status);\
 }\
 \_\_except (EXCEPTION\_EXECUTE\_HANDLER) {\
  pservice-&gt;SetServiceStatus (SERVICE\_STOPPED);\
 }\
 return GetLastError ();\
}

</div>

<div>

service\_manager \*service\_manager::get\_service\_manager ()\
{\
 return this\_for\_static;\
}\
----------------------------------------

</div>

<div>

之所有list没有写成map是因为在某个服务处理过程中可能需要用到服务的名称。写成map就需要反向查询，也不是很方便。 register\_service中会查询这个服务是否已经注册过，注意不能用服务名对比的方法。这也是我才发现的一个问题，C++在基类的构造函数中的时候，虚函数指针是指向基类虚函数表的。在某个service子类构造的时候，其基类(service)构造函数会自动调用register\_service方法注册自身。如果在register\_service用取得服务名的方法，此时虚函数指针指向了基类的虚函数表。也就是说，我们会调用到一个纯虚函数入口，从而产生C++错误。所以必须手工来匹配指针，大家忍耐忍耐。

</div>

        </div>
        

<footer>
  <p class="meta">
    <span class="byline author vcard">Posted by <span class="fn"></span></span>
    
    <time>Dec 20, 2006</time>
    <span class="categories">
      Tags:
        
        
          <a class="category" href="http://shell909090.org/tags/c">c</a>  <a class="category" href="http://shell909090.org/tags/windows">windows</a>  
        
    </span>
  </p>

  
  

  

  <p class="meta">
    
        <a class="basic-alignment left" href="http://shell909090.org/blog/archives/337/" title="出差到宁波">出差到宁波</a>
    

    
      <a class="basic-alignment right" href="http://shell909090.org/blog/archives/339/" title="正则表达式解析文本">正则表达式解析文本</a>
    
  </p>
  
    
      <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'shell909090blog';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
  
</footer>

      </article>
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    

    <p>
      
    </p>
  </section>



  
  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
      
      
      
       
      
      
      
      
      

    
    
    </li>
  </ul>

  

  

  
  
  
    <section class="even">
      <h1>Recent Posts</h1>
      <ul id="recent_posts">
        
          <li class="post">
            <a href="/blog/archives/2840/">使用Jupyter制作slides</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2839/">CentOS 6下安装Python2.7</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2838/">gpg pubkey ID碰撞</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2837/">更换blog声明</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2836/">Pulau Perhentian</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2835/">唐僧被吃了</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2832/">三亚潜水体验</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2829/">潜水的一些简单解说</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2822/">一个有趣的问题</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2820/">一次升级故障的排查</a>
          </li>
        
      </ul>
    </section>
  

</aside>

  </div>
</div>

<footer role="contentinfo">
  <p>Copyright &copy; 2016  - <a href="http://shell909090.org/license/">License</a> -
  <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.
</p>

</footer>


</body>
</html>

