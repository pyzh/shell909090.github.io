<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <title>Shell&#39;s Home</title>

  
  
  <link rel="stylesheet" href="http://shell909090.org/css/hugo-octopress.css">

  
  

  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  
  <link href="http://shell909090.org/favicon.png" rel="icon">

  
  
  

  <link href="http://shell909090.org/index.xml" rel="alternate" type="application/rss+xml" title="Shell&#39;s Home" />

  <meta name="description" content="">
  <meta name="keywords" content="">

  <meta name="author" content="">

  
  <meta name="generator" content="Hugo 0.17-DEV" />

  
  
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-48816091-1', 'auto');
ga('send', 'pageview');
</script>


</head>
<body>


<header role="banner"><hgroup>
  
  <h1><a href="http://shell909090.org/">Shell&#39;s Home</a></h1>
    <h2></h2>
</hgroup></header>


<nav role="navigation">

<ul class="main-navigation">
  
  
</ul>


<ul class="subscription">
  

  
  

</ul>


</nav>


<div id="main">
 <div id="content">
  <div class="blog-index">
    
    
    <article>

        
        

<header>
    <h1 class="entry-title">
        <a href="http://shell909090.org/blog/archives/2813/">云计算的成本计算</a>
    </h1>
    <p class="meta">Dec 18, 2015
         - 2 minute read 
         - <a href="http://shell909090.org/blog/archives/2813/#disqus_thread">Comments</a>

        
    </p>
</header>


        
          <p>成本构成和计算基准 一般来说，云计算的综合成本会分为三块。硬件，机房（包括机房内网络设施），运维。当然，其实还有IP费用和流量费用。但是那个在云计算的费用中一般也是分开列的，所以可以和以上三项分开算。我们先算出去掉IP和流量的费用，然后再来独立讨论这两项的效应。 在云计算中，CPU是可以超卖的，但是内存一般不超卖。所以我们计算的基准是内存。准确的说，是“带上其他硬件设备的内存”的单位价格。单位是人民币每G每年，缩写为/Gyr。在整个计算中，硬件费用都是来自dell美国的报价计算器，汇率恒定在6.5，折旧速率是5年。存储系统的折旧速度会比整机更快。存储盘3年折旧，SSD1.5年折旧。 存储是硬件成本中比较特殊的一项，因为每个虚拟机都带有存储，也可以额外配置。所以我们单独为其估价，再在整体费用中将其加回去。这样在估算价格时可以计算光板系统。 硬件成本 在这个计算中，我随意挑了一款2U机器——R530。这是一台最低型号的2U机器，不知道有没有人在实际生产中用他，总之我们就先随便算。这台机器极限能插8条32G的内存，总内存量可以高达256G，还是挺适合虚拟化的。因为机器总体有成本，单机内存数越高，原理上说越省钱。 撇开存储，撇开网络，内存升到极限，其实我们能选的就是一颗CPU。而且一般来说，CPU和内存需要成比例搭配。一般会选择1:4的搭配比，256G内存需要64颗核心。整个CPU搭配表上就没这么牛X的CPU。。。 好吧，退而求其次，看看稍微差一点的CPU如何。由于整机搭配的内存和CPU越高，整体价格越便宜。所以我们搭配一颗最牛X的核心——E5-2695 * 2。整个系统瞬间升到56颗核心。和64核也相差无几，我们就选他了。 相对的，整个机器既然配置了这么牛的系统，那么网卡就不能用默认的千兆网卡了。我选了两个双口光纤万兆模块，再加上一个1+1冗余电源。其他都用默认选配。计算下来，每G成本为56.2/Gyr。这差不多就是一个光板机器的最低价格了，里面不带任何其他费用。 另外，为了参考，我们计算一组CPU配足的机型E5-2670 * 2。这颗CPU是24T的，所以要配合192G内存。平均成本为60.47/Gyr。 IO密度问题 上面假定一台机器尽力往里插内存，但是实际上不能这么做。因为存储模型的问题。 我把虚拟化分为两种——单台机器故障的情况下数据不丢失，可以立刻在其他系统上开始启动系统的。和单台故障的情况下无法立刻恢复系统，甚至数据完整性都不能保证的。前者敢叫云计算，后者只能叫VPS。 为了达到后者，一般我们会把写入存放在多台机器上。而为了效率考虑，EC编码之类的方案几乎不能考虑。所以综合下来，唯一的方法就是将数据写入同步到另外两台机器上（三副本）。如果这个复制动作通过网络进行，那么写入速度就受到网络瓶颈。 例如上面的256G机器。虽然我选了两个双口万兆模块，总吞吐量高达40G。但是实际上你得假定可能有一根线故障，可用速率只有30G（如果是一个模块故障，更会降低到20G，幸好这不常见）。30G速率均分给256G内存，平均分给每G的吞吐只有120Mbps/G。折算出来就是15MB/s每G。这个速率要通过两份数据，分别传输给两台机器。如果用户不幸而选择了1G的内存，搞不好写入速度只有7.5M/s。要达到普通系统60M/s的写入速率，至少需要8G内存。这还没有计算机器到机器间通讯速率。 那么解决方案是什么？其中之一就是降低机器上的内存数。当然增加网卡也是一个方案，但是这会严重影响接入系统的效率——我们本来已经出了4根纤了，你想把服务器搞成八爪鱼不成？ 如果内存数降低，那么单位内存上的吞吐速率就能提升。192G的吞吐是160Mbps/G，每G写入可达10M/s。内存降到128G的话，平均吞吐率就会升高到240Mbps/G，每G的写入速率可以提高到15M/s。如果降到64G，每G写入速率还会提升到30M/s。不过IO问题是个峰值问题。如果全系统都有大量写入，例如大部分实例都装了数据库，那么很不妙。不过如果全系统都是纯密集计算，那写入速度其实影响并不很大。为了对比，我同样计算了128G和64G的情况。但是这并不表示在实际搭建集群的时候需要使用低内存的机器。 有趣的是，在其他保持不变的情况下，128G的平均成本为59.44/Gyr，和256G的版本相差无几，比192G的版本还便宜些。64G却快速上升到94.25。这说明在一定内存数量以上，硬件平均成本受到内存密度的影响并不大，但是低于某个限制后，则快速受到影响。 另一个方案则是在服务器上采用40G网卡，4块40G网卡也能解决问题。但是网络会非常难做。因为上手就用了普通汇聚层的速率，所以如果要不大影响收敛比的情况下，汇聚和核心的速率要求会进一步提升。这种模型下，单位价格为62.55/Gyr。 当然，还有另一个方案。我们使用独立存储系统，例如盘柜。这样会带来两个好处。首先盘柜的光纤独立，因此会极大的提升网络系统的效率。其次盘柜的多份复制是自行完成的，因此并不需要在吐出光纤上传送两份数据。当然，我对这种方案不熟，所以下面没做深入计算。哪天可以把这个方案的成本模型算出来再写一篇。 下面我总结一遍上面方案的配比和成本： 256G + 10G * 4: 56.20/Gyr 192G + 10G * 4: 60.47/Gyr 128G + 10G * 4: 59.44/Gyr 64G + 10G * 4: 94.25/Gyr 256G + 40G * 4: 62.55/Gyr 注1：其实192G的版本用R730还会更便宜一些，低到54.40/Gyr。但是我们的目标是同类对比。为了减少环境变量，所以不讨论这种情况。 注2：其实128G的版本由于CPU比较节能，所以整机大约可以节约100W的电力。这部分在下面并没有被考虑，否则可能涉及机柜里会多或者少一台机器，计算会非常复杂。 机房成本 机房成本包括两块，网络设备费用和柜子费用。 网络费用很容易算，一个柜子一般是42U/10A/20A电力。撑死放5-10台服务器。一个服务器两口，也就是10-20口左右的交换机。选个不大夸张的机器，也就是1W差不多了。就算电力翻倍，机器翻倍，交换机价格差不多也是翻倍的。所以平均成本还是基本不变。 核心那里难算一点，一套核心要上百万，摊给全机房用。而且如果机器太多，可能两层交换量不够，还会用三层交换。那还有汇聚层的钱要算，大概又是上百万。 柜子的价格最难算。视地点不同，每个月从几k到十几k不等。每个柜子能放的机器，随电力状况和CPU功耗，从5台到15台(35A)不等。而且很多时候，公司的体量大小和谈判能力也会严重的影响到价格。 所以，为了简化上述计算，我直接硬把机柜价格指定为60k/yr[1]。300个柜子，每个柜子5台设备，1500台机器。核心加汇聚加接入，总数大约600W，每个柜子20k。至于为什么是这个数？不为什么，就是后面好算。 于是很容易就算出来，每机柜每年成本64k/yr。128G下是100/Gyr，192G下是66.67/Gyr，256G下是50/Gyr。40G光纤比10G光纤原则上要贵，因为起手就要用汇聚交换机，而不是接入级的。但是具体贵多少——很遗憾我根本找不到数据。推测是贵了至少5倍。 实际上，由于机房各种配比不一定能够达到最优状况，所以接入模型配比往往会比预期的高上非常多。而且机房成本也不一定能够控制在60k/yr的水平上。所以如果从业界实际角度考虑，这个费用的精确度大约会有20%的上下浮动。 参考 这篇文档 ，有的地方能租到这么便宜的柜子，有的地方不行。 运维 一套云计算平台，需要多少个人运维？</p>

          
              <footer>
                  <a href="http://shell909090.org/blog/archives/2813/" rel="full-article">Read On &rarr;</a>
              </footer>
          

        

    </article>
    
    <article>

        
        

<header>
    <h1 class="entry-title">
        <a href="http://shell909090.org/blog/archives/2809/">说说密码和安全设计</a>
    </h1>
    <p class="meta">Oct 22, 2015
         - 1 minute read 
         - <a href="http://shell909090.org/blog/archives/2809/#disqus_thread">Comments</a>

        
    </p>
</header>


        
          <p>趁着某站密码泄漏，我review了一下整个密码和安全系统。下面总结一下要点，大家可以参考一下。但是我觉得多数人无法照抄。 基础 假定 **会随时找我谈话。（不要以为不现实，想想我得分最高的项目） 手机是会丢的。但是窃贼不会攻击经济无关帐号。 设计 尽量使得问题只出现于局部，不会波及全部系统。 在不严重的情况下，尽量简化使用，而不是增加复杂性。 在“大部分情况下更严密，小部分情况更糟糕”和“平均化”的选择中。只要小部分发生概率不高，选择大部分情况更严密，并尽力避免小部分情况。 帐号体系 能用Oauth自动登录的尽量绑自动登录。能不自己管认证体系的尽量别自己管。 境外关键服务，应绑定邮箱，不可绑定手机。其余服务应绑定手机和邮箱。如果没有假定1，能绑啥绑啥。 集中绑定能减少帐号系统复杂性。其代价就是当基础手机/邮箱出问题时，后果会很严重。因此需要设计对应措施。 重要服务（尤其涉及钱）只能有一个绑定寻回，切忌绑了邮箱绑手机，还都能寻回。一个出问题，帐号很危险。 基础手机/邮箱之间严禁互相绑定，以防一个出问题全部出问题。 多个身份间不要串帐号。一个帐号体系和另一个帐号体系之间可以发生来往，但是不能发生混同。想一下妹子用自己手机号帮多个男的登记开房的事。。。 基础邮箱/手机的信任问题不是信任问题，是信仰问题。对应措施无法对应基础系统自身的问题，例如供应商恶意作恶，或者供应商出了问题。所以选择谁是个信仰问题，要仔细选择信仰。 OTP管理 能开OTP的统统开起来。把emergency token抄纸条上丟家里。 可以使用OTP的列表 。 上面的补充：Microsoft, CloudFlare，Slack，Vultr，Tumblr，Ifttt，Eveonline，阿里云, DigitalOcean，dnspod，btc-e。 ms家会让你装他自己的app。请在手机系统的选项里选other，这样他就乖乖出一个QR让你扫了。 OTP的保存时间和系统安全性有关。可信系统上可以保存一个月，不可信系统上尽量在一天以内。太长时间可以登录不需要输入OTP等于没有OTP。 密码管理 使用密码数据库保存数据。 密码数据库管理程序应彻底开源。 使用同步网盘保存和同步密码数据库（加密后的）。 要注意防护整个系统突然失效。从出现概率分析，系统失效概率比被盗概率要高。而一旦发生失效，你的大多数帐号就全都失控了。 手机上不应同步密码库，而应手工复制更新。以防同步系统出错清了所有副本。 可以定期将基础密码(主要是邮箱)抄出来，放在家里的角落里。万一不得已，可以对所有系统做密码寻回。 密码维护建议在同一个环境上进行(例如全是windows)，以防两种不同版本的软件冲突导致数据丢失。 不应在不可信系统上输入主密码。否则主密码和密码文件都会丢失，等于所有密码丢失。所以不要在不安全系统上使用密码管理系统做任何操作。 要谨慎使用粘帖板管理程序。保存粘帖板历史的程序不要开。 搞一个足够安全的系统随身。推论可知，系统越多，出问题可能性越高。搞一个足够安全的系统随身，可以避免万一的情况下被迫要在不安全的系统上输密码。 这基本就是需要你有一只足够安全的手机。 手机 如果手机有root，不算安全系统，不能使用密码管理系统。 注意手机上的“可以收取短信”和“可以访问剪贴板”权限。如果一个应用可以访问这两个，基本就可以访问大半密码数据库，并收取验证码。也就是可以在无察觉的情况下把某个帐号偷跑。 手机上保存的帐号尽量不使用手机寻回帐号，尤其是涉及钱的。如果帐号保存在手机上，而且可以用手机寻回。一旦手机丢失，拿到的人就可以长驱直入了。按照假定2，这很危险。 钱 银行卡升级到高密卡。低密卡的安全性问题就不说了。 目前高密卡还是可以按照低密使用的，这其实仍然不安全，因为复制后还是可以偷钱。增强卡安全需要全部系统强制废弃低密卡。 经济相关帐号需要一个“防止手机丢失”的手段，否则不应在里面长期放大量资金（可视为这笔钱会随手机丢失）。 支付宝的设计是“手机高于一切”。所以在“手机会丢”的假定下，直接出局。微信的设计也类似，所以也出局。 银行帐号，其密码无法通过手机寻回的，可视为安全。 如果能通过手机寻回密码的，有转出限额(无法通过手机更改)也可以接受。 吐槽 QQ现在要求我用申诉的方法才能改密。但是申诉需要三个以前好友的帮助。我TM从98年开始用的，连同学都没几个还在上了。你让我去找麻花藤来申诉啊。。。 支付宝本来还支持字母支付密码，后来直接改成了6位数字。手机应用本来还需要解锁，现在只在特定情况下需要输入手势锁。本来还有宝令，现在已经没有了。总体来说，支付宝的安全性是越做越差的。 在整个密码体系里，就属支付宝和微信的安全性最差，就属他们涉及的钱最多。</p>

          

        

    </article>
    
    <article>

        
        

<header>
    <h1 class="entry-title">
        <a href="http://shell909090.org/blog/archives/2806/">从青蒿素得奖说现代医学里的方法论</a>
    </h1>
    <p class="meta">Oct 16, 2015
         - 1 minute read 
         - <a href="http://shell909090.org/blog/archives/2806/#disqus_thread">Comments</a>

        
    </p>
</header>


        
          <p>最近青蒿素比较火，首先恭喜我们终于有一个拿得出手的nobel奖了。 然而，很多人对青蒿素获奖的事情传播不准确，各种争论。例如，中医获奖了。实际上在青蒿素的获奖中，没中医太多事。要明白这点，我们首先就得明白，什么是现代医学，现代医学中有哪些基础的方法论。 双盲实验 双盲实验法是整个近代医学基础中的基础，说是基石也不为过。可能很多人被双盲法的名字搞糊涂了，整个双盲法的思考基础其实非常的简单直观而且科学。可以说，如果听了双盲法的概念后，表示不可以理解和接受的，都得算伪科学。。。 让我们从一个简单的问题开始。我们怎么判断一个算命的是不是有真本事？ 最简单的方法，当然是让他算一下，然后我们找人去验证他算的对不对，进而得出一个正确比例来。这个方法固然简单，但是多少才算是“对”呢？这又陷入了另一个困难。 作为解决方法之一，在算命的算玩后，找完全不会的人胡扯一些算命结果，作为对比去验证。如果算命师的命中比例比瞎猜明显高，那就是真的算命师傅。如果和瞎猜差不多，那就是水货。如果扔出各种理由告诉你不能这么做，那么就是不可知。 这个方法很简单吧？通过足够多的实验，我们可以清楚的知道，哪些算命师是真货。 但是有个问题。算命结果的解读，是需要人进行的。而人会受到心理暗示的强烈影响。例如，你知道自己正在解读某位大师的算命结果，他是否吻合呢？有的时候往往模棱两可，你可能就认为其实是命中的。所以一般性情况下我们会让你对正在解读的是真的还是假的保持未知。类似，近代医学已经证明，如果你认为自己在接受治疗，那么你的病情有的时候会出人意料的好转，哪怕实际上你并没有接受治疗。这叫做安慰剂效应。因此，在医学实验的时候，被试者必须对自己是否真的在接受治疗一无所知。这叫做单盲实验。 而更进一步的，当实验的组织者了解哪组是真组的时候，出于利益因素他可能进行干扰。即便他本人并不进行干扰，有可能在日常的接触中给予了过高的期望，从而影响了实验的效果或者解读。这种现象在现代心理学中叫做 皮格马利翁效应 。如果你给予某个组过多的期望，那么他们就会表现的更好。为了防止这种现象，我们会让专门的人进行真假对照组分配，而对实验进行管理的实验者，在结论完成前对真假都是未知的。这叫做双盲（实验者，被实验者）。 可以说，双盲法并不否定算命。双盲法不假定你要做什么，也不需要理解其工作原理。相反，双盲法试图用一般人能理解的角度，来验证你行为的有效性。双盲法就是一个更严谨版本的“让我来试试效果”。 为什么要进行双盲实验 很多人会说，中医已经经过了几千年的检验，是对人体，尤其是中国人体的非常高的认识。所以不需要双盲检验。其实从青蒿素得奖的报道中我们恰恰可以看到，这种说法是完全错误的。大家可以找一下青蒿素研究的相关报道，青蒿并不是治疗疟疾的第一线用药，大多数用法和用料也全是错误的。相关课题组从中医中，收集了几百个可能的药方，而其中能够成为药物的，只有青蒿素这么一个。那么剩下的几百个药方是什么？对人体的全面总结？这就好比你去医院，问医生说，搞不搞的定啊。医生拿出600多种药来，告诉你，一样样试过来，你的病就有救了—— ——尼玛你的病才没救了呢。600多种药，当饭吃都要吃上几天。更不说多种药物之间还会互相反应冲突。这哪里是治病，分明是致命。 也有人说，中医需要根据情况，复方辩证，药物配伍，才能治病。所以双盲法不能起作用。其实这也简单。找个白胡子老头，就是电视广告里经常有“祖传配方”的那种形象，也跟一批患者面前一戳。找点树皮草根去熬，完了也给丫灌进去。要是你的治愈率比不过这个，实话说，我们真用不着您的祖传药物，直接在民间里筛演员就成。还能做一档节目，就叫中国好中医。广告商都好找的很，凉茶商们分分钟扔出一堆钱。。。 还有人说，中医有几千年历史，近代医学才几百年。为什么要用一个几百年历史的东西，去证明一个几千年历史的东西呢？ 如果你信服这个观点，你就需要考虑。马车有超过千年的历史，汽车历史不超过200年。按照同一理论，我们不能用汽车的理论去规范马车（例如靠停，让行，撞击安全标准等），还得让他们在一起跑。不知道你春运的时候，会不会驾驶一架马车上高速（如果上的去的话）。 有些人就是这么奇怪。穿化学制品，汽油机车出行，住钢筋水泥，还用洋人们发明的一种叫CPU的玩意上一种叫ineternet的网（抱歉，有些地方叫innernet）。偏偏轮到中医头上就不能用现代的标准衡量。你知道早年某国也有一群人，大喊着大师兄速速显灵，戴上面具自以为刀枪不入出发去捣毁洋鬼子们的教堂。该国还给自己的军队起名叫“虎神营”。其结果我就不多说了。。。 其实对真正有信心的中医大师而言，双盲法不是打脸，而是机遇。双盲法能够以近代科学方式，令人信服的检验一种疗法是“有效”的，还是“无效”的。这为后面的一系列研究打下了基础。而且通过双盲法测试后，治疗方法的有效性就会被现代医学所接纳和研究，从而使中医在未来有更广阔的发展。如果对中医真正有信心的话，我无法想象为什么会拒绝双盲法检验。最基本的，一家馆子好不好吃还允许客人尝尝味道再评价呢。一个疗法有没有效，居然不允许别人试试再评论，搬出各种理由必须无条件的相信。我也是没话说了。。。 记载和公开验证 我还看到某篇报道，通篇长篇大论论述“黄青蒿也是青蒿”。这更是扯淡。一种植物到底是不是药物，药典居然并不能很明确的分辨明晰。那么你吃的药有没有效，我想医生也并不能很明确的分辨明晰。数百年的中医口口相传，每个中医是不是都能掌握正确的治疗方法呢？也未必。鲁迅先生就记载过一味药： 败鼓皮丸 。有没有效？我不知道。治法虽看似儿戏，但是不能因为看似儿戏就断定无用。传统医学种种方法，很多有效的疗法就藏在看似儿戏的行为里，例如嚼树皮。但是我至少能说一点——这记载很有问题。 破旧铜鼓皮一张——什么样的铜鼓？用的什么动物的皮？ 以陈烧酒和糯米粉糊丸——是不是要哪里的陈烧酒和糯米粉？ 这些都不明确，确实只能靠中医的口口相传，秘而不宣。别的不说，我至少可以说一点——鲁迅先生当年就没遇到传对了的医生。 完全存在可能，某种特定动物的皮，在经过很长时间后，恰好能够治愈文中所描述的症状。但是这种动物能治，换种动物行不行？时间短点行不行？这些都很模糊。其结果就是这个药方的效果不“稳定”，有时有效，有时没有。有的人有效，有的人没有。 然而在验证上，这个事就有点扯皮了。上面的一堆组合中（各种动物，放置时间长短），假设有一种组合是有效的。那么能说这个方子有效么？无效？这方子明明可以用。有效？大部分的医生，大部分的时间里都无法治愈你。这就像青蒿素的悖论一样。虽然治疗方法都摆在那里，但是在中国历史上的几百年间，愣是拿疟疾没辙。证据就是，自古以来中国视南方瘴疬之地为畏途。可从没听说哪个医生带了一车青蒿大摇大摆的走了进去，对瘴气是若无物的。另一方面，如果中国长期以来，主流治疗方法都是正确的，有效的。那上个世纪搞那么大规模的疟疾治疗研究是干嘛呢？为什么不直接用成方呢？屠女士是怎么获的奖呢？国家领导都是白痴么？ 近代医学体系的基础，是清晰的，公开的记录，和公开的第三方验证。只有将发现记载清晰，才能够公开，由其他人独立重复实验。只有公开，才能允许第三方验证。而只有第三方验证，才能对整个实验中是否存在潜在问题，做出一个独立的研究。这整个体系，是现代医学得以存在和发展的基础。 讽刺的是，这也同样是中医发展的基础。本草纲目之所以伟大，正是因为其公开而完善的记载。如果本草纲目是一本家传古籍，当然更值钱，然而中医也无从发展了。 近代医学中，也有记载不清楚的地方（或者记载者自己并不知道记载不完善）。但是消除记载不明确的地方是常识，将这种不明确秘而不宣才是异常。例如 反应停事件 ，人们以为记载了药物的分子式就结了，没想到药物还有手性问题。其中的R构型有疗效，而S构型会致畸。通过对Thalidomide的深度研究，科学界明确了药物的作用机理，风险，和控制方法。现在，Thalidomide被作为一种麻风性结节性红斑的药物使用。通过分离手性分子，可以将副作用降低到最低。 这个事件，和“黄青蒿是否为青蒿”的纠结，可做一对比。 临床试验 双盲法测试有效不是故事的终结。恰恰相反，双盲法认定了这是一种有效疗法，这才是故事的开始。一种疗法（尤其是其副作用）被现代医学透彻的研究之前，是不会被广泛应用的，尤其是中药。因为中医在近代医学上扮演过极不光彩的角色。 在上世纪，其实老外们很迷中药的。后来在92年前后吧，比利时有很多人染上了奇怪的肾病。经过医学研究，明确将病因指向含有马兜铃酸的中药。此后，在2000年的时候，FDA正式下令，禁止含有马兜铃酸的草药和制品流入美国。整个事件可以看wikipedia的 马兜铃酸事件 。 其实我的意见，吵架双方完全没争论到点上。当我们讨论毒物的时候，剂量是一个很重要的因素。马兜铃酸在各种剂量和配伍下，引发肾衰竭的可能性如何？至今为止没有人给出解答。似乎中医中药的赞同者们，从来没从近代医学的角度考量过问题。（这里可参考上面的“为什么要进行双盲实验”） 化学药品固然也有导致肾衰竭或者肝衰竭的可能性，但是在使用的时候，多大剂量，可能造成多严重后果，这些数据是基本可查的（我记得这货应该叫 循证医学 ？）。医生在开药的时候，可以根据服药的后果可不服药的后果，来衡量使用一种药物的价值。 然而马兜铃酸的毒理性数据（尤其是中医们宣称的，群臣佐使情况下的毒理数据）缺乏（在可靠测量方式下缺乏），使得传统医学中很大一部分药物根本无法被现代医学使用。因此我们只能看到中医界反复宣传，中医安全，可靠，不会引起副作用。但是现代医学界却始终无法接受。最后就完全变成了信仰之争。 我相信中医中还有大量的有效的疗法（和更大量的，传出了问题的疗法）。但是哪些疗法有效，哪些疗法无效，哪些疗法有多大效果，有多大副作用，尚没有一个明确结论前。实话说，虽心向往，不敢用之。 作用机理 近代医学比传统医学更进一步的，是明确了“药物为何会起作用”的机理。这个机理是明确的，公开的，可重复的，可证伪的，而不是以阴阳五行或者太阳月亮在天空中的位置，来指导治疗。 我查过，关于青蒿素，就有好几篇“青蒿素类药物的作用机制”。我目前还不清楚其作用机理是否已经完全被解析明了。但是人类是有好奇心的，一定会有人好奇为什么这种药物能起作用，从而持续的研究他。 更深一步，近代医学对药物机理和毒性的研究，甚至能够改善药物的效果，减少毒性。例如上面提到的反应停手性问题。对药物作用机理的研究，甚至还能指导药物设计。例如 奥司他韦 。 当然，作用机理研究不清，也是不妨碍用药的。现代医学没有那种必须搞清楚才用的怪癖。 中医，西医，现代医学 假定你感冒了。给你板蓝根的，是中医。给你柳树皮嚼的，是西医。给你对乙酰氨基酚的，是现代医学。我们在说西医西医的时候，其实也是巫医，是传统医学。只有当近代，医学结合了科学的方法论，才脱离原始蒙昧的阶段，正式成为现代医学。</p>

          

        

    </article>
    
    <article>

        
        

<header>
    <h1 class="entry-title">
        <a href="http://shell909090.org/blog/archives/2804/">印度游记-4</a>
    </h1>
    <p class="meta">Oct 15, 2015
         - 2 minute read 
         - <a href="http://shell909090.org/blog/archives/2804/#disqus_thread">Comments</a>

        
    </p>
</header>


        
          <p>11:44 AM – 8 Oct 2015: 早餐还是很赞的，居然有烟熏三文鱼。不愧是五星酒店，车辆进出都要用镜子检查底盘和开盖查引擎。人包分离安检，和机场一样。不过，印度的安全形势到底是怎样啊。我在想，中国为什么很少看到恐怖主义事件呢？（不代表我喜欢它）大部分都是群体维权事件。 有人反馈说，印度和巴基斯坦是世仇，因此有恐怖袭击风险。尤其是Taj Mahal酒店，是 2008年孟买连环恐怖袭击 的袭击对象（不过那次是孟买）。事后得知，真是一身冷汗。 中国不是没有，而是主要集中在西部。其他地方，有点风险的人还没下大巴呢，就先叫去谈话了。。。 12:23 PM – 8 Oct 2015: 德里的观光bus居然叫HOHO bus，顿时高冷有木有？ 查了一下地图，昨天的骗子看似跑一大圈，其实就走了300米的距离。不过他运气不好，酒店我在gmap上戳过。而且那个地方我居然去过。所以一眼就知道了他的把戏。 建议来印度玩的，把你常用的地点都在gmap上戳一圈。这样很多事情会很方便。 HOHO bus千万不要坐，老婆更是傻傻的买了两天的套餐，说第二天才多20%的价。结果咧，完全没有用到。 1:58 PM – 8 Oct 2015: HOHO bus 开到一半空调坏了，导游就打算把我们扔景点等下一班车（45分钟）。老婆就打算跑了。车上几个老外就不干了，跟导游争论，我们付了这么多钱不是让你浪费时间的。争论半天的结果，他们15分钟内调一班车过来。 还说老外气场足。 HOHO bus非常扯，开着开着，冷气没了。然后老外就和他们争论。本来让我们等下一班的，结果就是来人修车，同时尽快派一班过来。 气场啊，气场。 2:17 PM – 8 Oct 2015: 他们居然派了个工程师骑摩托来现场修，而且还调了车过来。前面争论的老外真牛。。。 实际修复的结果，差不多搞了30分钟，只能说略快而已。 2:23 PM – 8 Oct 2015: 刚刚经过一家大医院，门口的救护车就像出租一样密集。 这才是医院的日常。 5:03 PM – 8 Oct 2015: 上午看顾特卜塔，感觉好无聊。唯一的意义就是搞明白了谁修的塔。 不建议去玩。不过看到好多学生来观光。老婆跟我说，印度的妹子小时候真漂亮。 5:15 PM – 8 Oct 2015: 我靠，居然见识到了三哥的挂汽车。真是太震撼了。可惜距离太远，不然就照一张了。 话说他们的公交好像也是不停站的，上下全靠跳。 5:39</p>

          
              <footer>
                  <a href="http://shell909090.org/blog/archives/2804/" rel="full-article">Read On &rarr;</a>
              </footer>
          

        

    </article>
    
    <article>

        
        

<header>
    <h1 class="entry-title">
        <a href="http://shell909090.org/blog/archives/2801/">印度游记-3</a>
    </h1>
    <p class="meta">Oct 14, 2015
         - 2 minute read 
         - <a href="http://shell909090.org/blog/archives/2801/#disqus_thread">Comments</a>

        
    </p>
</header>


        
          <p>3:40 PM – 6 Oct 2015: city place, udaipur 12:51 AM – 9 Oct 2015: udaipur 事后发的，时间跳脱。 4:21 PM – 6 Oct 2015: udaipur大停电。餐厅有free WiFi没法上网，结帐需要手算，不能收信用卡。去小店买水，水都不冰了。回酒店，依然没有网。最糟糕的是，没有空调和热水。大中午。。。 4:24 PM – 6 Oct 2015: 问了附近的三哥，说停电在这里是家常便饭。几天就有一回，他们都不惊讶了。但是最近是旺季，还是很影响生意的。他们不知道为什么最近那么多中国人来，我总和他们解释，我们最近国庆。 这就是我说的，基础设施造成的重大影响。印度这地方不像中国，政府说弄个电线，分分钟就搞定了。你先得考虑对环境的影响，对古迹的影响，再问问居民答应不答应。等所有事情都谈好，中国人已经把活干完了。。。 4:42 PM – 6 Oct 2015: 今天去udaipur的city place，比jaipur的要好很多。展厅很漂亮，展品也很充实。镜子拚花，彩色琉璃拚花窗格，镂空雕花装饰。简单的几何图案大量重复，构造出美丽而丰富的装饰。 8:17 PM – 6 Oct 2015: 在路上偶遇一个中文很好的小哥，他说自己是在复旦学中文的，在合肥工作，安装atm机。这里是他老家，在做羊毛生意。六十年的一家店，经常卖东西到中国去。他说中国人来了经常腹泻，几乎都会。他自己都偶尔腹泻。然后推荐了我们一个牌子的矿泉水，应该会比火车上那种靠谱点。 小哥说中国啥都便宜，就是羊毛特别贵。中印外贸交流其实机会挺多。我觉得也是。只是基础设施可能会造成很大问题。不过这也不是什么大事，我们援非建设都搞了多少了，在印度搞个什么工程还不是手到擒来。只要能先把各方面问题先谈妥。。。 8:20 PM – 6 Oct 2015: 发现印度其实很多人会说中文，早上在路上遇到过一个人，也是中文很好。就是没多交流，不知道什么情况。我当时已经很惊讶了。结果下午遇到这个复旦中文系的高材生。这绝对是旅行中最大的惊喜。 不知为何，好多印度人会说中文。中国人就别指望印地语了，但起码英语不要太差啊。。。 8:49 PM – 6 Oct 2015: 补充一下。小哥说他家是耆那教的，所以应当全素。但是在中国做生意，经常需要跟着老板见客户吃海鲜。他就问他爹怎么办。他爹说，如果是必须的，那么可以接受。我说gosh，怎么和我想象中差那么多。印象中印度教徒（虽然他不是）经常因为牛肉起冲突啊。他说，印度正在逐步改变。 这是我最意外的一点，印象中印度很多教徒因为吃什么肉的问题经常起冲突。不同的宗教，在教义执行上会有不同麻烦。为此我还特意去了解了很多宗教和禁忌。不过我个人的意见，教义是用来约束自己的，不是约束别人的。不应当因为别人触犯教规而感到被冒犯。 11:12 PM – 6 Oct</p>

          
              <footer>
                  <a href="http://shell909090.org/blog/archives/2801/" rel="full-article">Read On &rarr;</a>
              </footer>
          

        

    </article>
    
    <article>

        
        

<header>
    <h1 class="entry-title">
        <a href="http://shell909090.org/blog/archives/2799/">印度游记-2</a>
    </h1>
    <p class="meta">Oct 12, 2015
         - 2 minute read 
         - <a href="http://shell909090.org/blog/archives/2799/#disqus_thread">Comments</a>

        
    </p>
</header>


        
          <p>11:02 AM – 4 Oct 2015: 这家饭店真心不错，前台很会沟通。我们找他租车，他给了我们很好的建议。我们本来打算包车8小时1700，停车我们付。他说你们可以9点出门，晚上多一小时150。从大早上到晚上，大约2200能下来。其实让我们多消费了，但是又不招人讨厌，确实的解决了问题。 酒店叫Umaid Mahal。 根据后面的计算，德里的平均小时工资大约就是150。jaipur这里带燃料和折旧才这个价格，估计工资会更低一些。 价格的计算模式是，1500八小时，因为有上下两个上下山（琥珀堡和老虎堡），所以有200的额外燃料费。超过的2小时一小时150，总计起来就是2000上下。最后有些额外的时间什么的，会多一点钱。 2:54 PM – 4 Oct 2015: 早上去了jarpur的city place和琥珀堡，很漂亮。不过可能是我们期望太高了，有的没到点的感觉。司机人很好，带着到处跑，也没有让我们乱买东西。 琥珀堡很古老，很有古堡探险的味道。据司机的说法，其历史甚至比jaipur还长。但是，可能是我们的期望太高了，琥珀堡里面除了镜之宫外，并没有什么太值得看的东西。 司机还不错，不会总带我们去买东西。我们后面自己说要去买点当地衣服，他带去了一个工厂店，估计能赚一点。衣服也是不错的，老婆回来后还一直穿。 2:59 PM – 4 Oct 2015: 琥珀堡的镜之宫。 3:11 PM – 4 Oct 2015: 三哥的套餐。叫做Rajasthan套餐。。 ‏@lichray评论: 美国也有，我很喜欢。 ‏@cashplk评论: 尼泊尔也看到过类似的，他们叫Daba。 3:39 PM – 4 Oct 2015: 在把印度物价换算成人民币，再对比上海物价后。就算不考虑旅游加成，我在印度还是成了只看胃口，不看价钱的买买买土豪。。。 尼玛上海能120吃顿大餐么？我还看个p的账单加税细节啊。。。 印度税也是分开列的。 10:47 PM – 4 Oct 2015: Hawa Mahal. place of the wind. 10:52 PM – 4 Oct 2015: 近三黑暗料理，中！国！炒！面！ 味道还不错。只是这东西绝对和中国没什么关系。 应该是“阿三黑暗料理”。号称中国炒面，其实和炒面一毛钱关系都没有，感觉上是炒的细米粉。炒过面的应该知道，炒面会比较油。印度这里放的油比较少，面更软，更像是粉的感觉。而且口味也严重的本地化了。 10:54 PM – 4 Oct 2015: 今天在jaipur玩的很开心，2000rs租车很值。最后我们还是被晒干了。要是不租车的话会更糟糕。琥珀堡很古老，但是没有想象中那么惊艳。老虎堡日落要看天气。根据色散定律，雾霾越重，红光越强。所以尽量挑印度人烧野火的日子来。 jaipur其实有点乏善可陈，一天都嫌多。早上去一下城市宫殿和星相台，下午去一下琥珀堡（不去也成），晚上在老虎堡看个日落。回来的时候拍一下风之宫殿，结了。其实从下午开始出门就够了，中午可以睡个觉。 10:57 PM – 4 Oct 2015: 城市宫殿不算好玩，只有点衣服和相片。可能艺术品都去了英国了。天文台是我们玩的最开心的。我看过世界遗产后，给老婆解释天文学发展过程和仪器使用方法。然后从天文观测和计算方法谈到万有引力。跑到老虎堡的时候我们已经在讨论二次方程求解过程了。 当然，过程不可复制，不要照着追妹子。 具体可以看“世界遗产”，“斋浦尔的天体观测设备”。 11:38 PM – 4 Oct 2015: 老婆发现了三个bug，很担心。我告诉她，每次检查都会有的，你要学会和这种情况和谐共存。她还是不开心。 对了，她是在衣服上找到bug的。 1:44 AM – 5 Oct 2015: 见识到了，三哥的开挂技术。太开挂了。等有流量了我详细吐槽。现在我要和开挂党战斗了。。。 上火车之前，找了半天站台。有个三哥给我们指了路，指错了。我们犹豫半天决定往回走，就看那个三哥跑来找我们，说不好意思他搞错了。你们的车是这个站台。正说着，站台信息又变化了，我们要去了隔壁站台。 你们人真是太好了。我上次给一个老外指错了路，地铁一发车，我可是追都没得追了。 另外，老婆去买水的时候，被一大圈印度妹子拍照调戏了。 1:56 AM – 5 Oct 2015: 我擦，刚刚一辆车开过，司机鸣笛，震耳欲聋。我们想说干嘛呢。就听口哨声拍手声喊叫声渐起，一帮三哥开始追车跑。车上爬满人，车顶坐着一堆。车不停，有人跳下，有人跳上。每当车上跳下人，空出位置来。就有口哨声起。一群大男人追着这个位置跑，争相跳上去。整个列车过站，犹如一场盛大的嘉年华游行。 亲眼目睹三哥开挂。 2:01 AM – 5 Oct 2015: 和开挂党一番斗争，终于上了车。其实三哥很客气。自己人当仁不让，我们就礼遇很多。大约是没见过白白胖胖的中国包子。车厢狭小逼戾，犹如交了华盖运。翻身是不敢指望了，连进出都需从脚底用钻进钻出的体位。底座宽敞些，却据说有老鼠。最恐怖的是，无空调车听说比空调还冷，因为风大。但是我们没带毯子 我们当时听说的情况是，从jaipur到udaipur的车，只有一节ac，其余都是普卧。有个坐过卧铺的哥们还说，一楼有老鼠。而且普卧比空调还冷，因为风大不恒温。我和人说笑说，100迈的时候手伸出去张开就是D罩杯的感觉？我现在感觉被一堆大胸包围了起来。。。我曾在甘肃坐过绿皮车，三哥的卧铺比绿皮车还恐怖。 对了，说到这个奇葩哥们。我们在umaid坐着等火车的时候，进来个妹子，开口问，do you have rose?</p>

          
              <footer>
                  <a href="http://shell909090.org/blog/archives/2799/" rel="full-article">Read On &rarr;</a>
              </footer>
          

        

    </article>
    
    <article>

        
        

<header>
    <h1 class="entry-title">
        <a href="http://shell909090.org/blog/archives/2795/">印度游记-1</a>
    </h1>
    <p class="meta">Oct 11, 2015
         - 2 minute read 
         - <a href="http://shell909090.org/blog/archives/2795/#disqus_thread">Comments</a>

        
    </p>
</header>


        
          <p>注意，由于是回国后整理，因此以下时间都转换到了东八区时间。印度是东5区半，所以当地时需要倒退2.5小时。 10:21 AM – 2 Oct 2015: pranthas and pancake, in india 正解应当是 parathas ，一种绿豆做的小煎饼。 2:03 PM – 2 Oct 2015: 印度国庆，大部分商店关门。只能吃麦当劳。果然没有牛肉。 准确的说，印度有三个national days，其中10-02是甘地的生日。细节在 Public holidays in India 。在这天，我们看到的大部分门面商店都是不开门营业的。但是很多私人的小店照做生意不误。这点和中国有很大不同，去印度旅游的同学一定要恰当的避开节日（除非为了赶庆典）。 另外，印度的kfc做的鸡腿相当不错，我很喜欢。 感觉上印度的kfc之类的地方是情侣常去约会的地方。我们在kfc里面经常能看到一对对情侣。老婆在kfc门口站了一会等我，上来两拨搭讪的（你们几个意思）。 2:57 PM – 2 Oct 2015: 印度麦当劳送的礼品，made in china… 3:20 PM – 2 Oct 2015: 老婆的穿着有什么奇怪的地方么？ 印度的 莎丽 ，很漂亮的衣服，大家去印度可以买买看。我们这块是700，加搭配的裤子什么的一堆，最后砍价到1000rs。不过穿法比较麻烦，不大熟悉的话会走走路就开了。然后走几步调整一下，很花时间。 我们穿着这个在街上走的时候，回头率相当高。后来我发现印度人对我们中国去的好像很好奇，好多围观拍照的。老婆的这个穿着更奇怪，后面杯子指出来了，缺头饰。所以回头率超高，连欧美老外都连连回头。 7:46 PM – 2 Oct 2015: 在印度喝下午茶。 这家下午茶店就在我们住的简易酒店隔壁。这家酒店用的还是英式电梯（就是那种拉手门，好像建筑工地一样的那种）。床很有特色，双人房两张床是上下两张，就像我们大学里的那种。中庭有很漂亮的天井，躺椅和阳伞，看上去像是英式庭院。 9:34 PM – 2 Oct 2015: 印度的黑暗料理还是很不错的。两个人，半只鸡，一份羊肉咖喱（大好），一份黄油囊，一份蔬菜奶豆腐。味道都很赞。结帐时他们说690，我们给了700要跑（大约人民币70）。他们拦住我们，说等等你还有找头。我当时就震惊了。然后找回来一看，620，我们一直看错了。就更震惊了。 印度的物价超便宜，德里介于武汉和上海之间，其他小城市比武汉还便宜。中国人去了都是土豪。我们这天去的是一家路边摊（黑暗料理），大概相当于上海路边的小店。可是那也不是62人民币能搞定的地方。。。 印度的咖喱变化非常复杂，但是对游客而言，你最多只能吃出主料是什么，红咖喱还是黄咖喱。基本来说只有素咖喱，鱼，鸡，羊，蘑菇这么几种变化，我建议在不同的店可以错开变化吃吃，而且中间最好间隔着几顿别吃咖喱。以免发生惨案。。。 8:59 AM</p>

          
              <footer>
                  <a href="http://shell909090.org/blog/archives/2795/" rel="full-article">Read On &rarr;</a>
              </footer>
          

        

    </article>
    
    <article>

        
        

<header>
    <h1 class="entry-title">
        <a href="http://shell909090.org/blog/archives/2792/">代码不小心泄漏了怎么办？</a>
    </h1>
    <p class="meta">Sep 29, 2015
         - 1 minute read 
         - <a href="http://shell909090.org/blog/archives/2792/#disqus_thread">Comments</a>

        
    </p>
</header>


        
          <p>我靠，今天看新闻看的不能忍了。 最开始，我看的是这条新闻 github 上 fork 了一个项目，有人发 PR 让我删掉，我该怎么办？ 。这个前几天比较火，各种可乐。同类的消息来源还有这里 在 GitHub 上面泄露了公司源码怎么办？ 。然后我在里面看到了乌云上的这个漏洞 苏宁某站企业信息泄露(推广+结算+报表等) 。 事实是，其实在很久以前，这个仓库已经泄漏了。比较让我想吐槽的是厂商评价，漏洞等级，中？ 中？ 中是什么概念？在本公司内部评定中，对非关键平台产生影响的漏洞被评估为低级，对关键平台产生影响的评估为中级。凡举严重信息泄漏，DOS，执行任意代码，一旦查证确实，统统是高级漏洞。根据公司规定，快速响应时间是24小时。 那么多核心资料的上传，苏宁居然只是评价为中？送礼品卡？我靠，这种漏洞难道不是立刻评价为最高风险漏洞，然后去和github的人交涉去删除repo么？那TM在一两个月前仓库应该已经删光了。而且发现者发的居然是——礼品卡？ 也许腾讯结算工资的时候能发Q币，可是苏宁的礼品卡，这汇率怎么定呢？ 好吧，我们就先不吐槽员工的下限了，上一篇刚刚吐槽过。我们还是说正经的，你的代码要是不小心泄漏到了github上怎么办？ 首先，联系github去删除这个repo。 其次，里面所有涉及到的关键地方都需要改掉，例如密码，内置的参数，等等。能改的全改了。 最后，把这个代码自己开源发布出去。 是的。仓库一旦泄漏，就永远泄漏了。一帮人在讨论github上怎么删除清空仓库，其实什么用都没有。因为那么多人，总有人会clone到本地。然后事情就变得无聊了——你难道去硬盘上删除么？ 我们也曾经发生过类似的事情。在和某著名漏洞平台合作渗透自己的时候，被白帽子拿到了一个管理用的repo，里面有一些key。结局就是严重安全漏洞。出问题的漏洞快速封闭，紧急检查泄漏情况，泄漏出去的key全部更换一遍。涉事员工点名批评，有人被吊销了权限。整套管理机制都被review一遍，拉去整改。我们检查过日志，原则上说，只有我们和攻击者（也是友方）有访问过这个repo。我们不质疑合作方的专业性，但是如果指望这就没事了，可以当作没发生过了，那么就是我们的失职和不专业。在这种情况下，就只能假设我们的这些key在外面满天飞了。幸运的是，这些key更换后就可以杜绝问题，不会因为这些key曾经泄漏导致新的key有风险。而且相关系统日志表明，攻击者并没有进一步利用这些key，数据也没有发生进一步的泄密。可见我们的合作方还是很专业的。 后面更low的来了。twitter上有这么个消息： V2EX 上已经有回复的主题，不会被删除。请苏宁云商不要再通过各种渠道骚扰我了。你们的代码泄漏了，最重要的事情是内部控制和沟通，而不是想着来和谐整个互联网上关于这件事的讨论。 。 我靠，第一时间被雷的天雷滚滚。 我知道互联网上这种捂盖子的事情很普通。但是是怎么回事，离开捂盖子就不会做事做人了么？ 作为一个企业，要想安全的基础，首先是不要讳言自己不安全。你得承认，企业里面人多手杂，每个人水平也有高低之分。没有什么企业是真正安全的。但是最起码的，你得承认，自己会出事故。如果不会出事故，那我们还需要漏洞平台做什么呢？你还接受别人的警告做什么呢？这种“捂盖子”的想法，其实和漏洞评价中是一脉相承的。我大企业万世无忧，在商场上正面打败对手才是事情的要点。这种事情只是芥藓小疾不足为道，打发要饭似的打发一点，不要惹出新闻就得了。等出了问题，更多的也是考虑面子和公关问题，而不是安全问题本身——这根本不是一种对用户负责的态度。 当然，作为公司，我们更希望漏洞的发现者和我们沟通。最好漏洞就是我们自己发现的。发现者和漏洞产生者的关系越近，漏洞上花费的成本越低。如果是同部门的，大概只要请吃顿饭。如果是同公司的，估计就会被批评一顿。如果是友商，那就可能涉及到处罚。而如果发现者都不向公司汇报漏洞了，这其实不是代表公司没事了，而是代表黑产很开心。</p>

          

        

    </article>
    
    <article>

        
        

<header>
    <h1 class="entry-title">
        <a href="http://shell909090.org/blog/archives/2789/">从xcode说起——开发中的那些傻逼事</a>
    </h1>
    <p class="meta">Sep 21, 2015
         - 1 minute read 
         - <a href="http://shell909090.org/blog/archives/2789/#disqus_thread">Comments</a>

        
    </p>
</header>


        
          <p>最近xcode很热——我当然不是说软件本身。在工具链里埋炸弹是一个经典手法了，我还以为从putty之后大家应该已经提高警惕了呢。 下面我来数数开发中的一些SB行为。排名不分先后。 下载用百度，下载完成不做MD5 请问你作的是死么？ 聊天用QQ，公司密码群里发 下面我要发密码了，请其他同事把头转过去一会。。。 最讨厌的就是这种，自己密码也不简单，乱发，漏了。企业绝对怀疑不到个人头上。但是搞得安全形同虚设。 共享帐号/密码 下面我们三十个admin集体开个会，讨论一下我们中出了一个叛徒的问题。。。 相关密码扔邮箱 结果有一天，你的mail密码不慎漏了，而你不知道。。。 乌云2015大会上特别提到的case。 弱密码 每个公司总有那么几个人，天天用弱密码，说了不改。 安全组不能做主开除这些人的公司，不要妄称安全。 git提交时根本不知道提交了什么 结果把密码提交上去了有木有？ 自己去搜一下，这个问题非常常见。 基础工具链交给实习生维护 “高级”的“架构师”当然要关心最有价值的“核心”内容。 院长不亲自操刀手术，不代表一线可以交给实习生好吧。 只是很多公司招不到人，就拿实习生或者资历比较浅的人去凑合了。实话说，出问题只在早晚。 我只是调试，一会就关 我很想知道你和老婆在床上的时间能不能比“一会”更长。还是说你是“一会就完事”的那一号？ 凡是在一次约会时间里搞不定的事情。。。那就不是一会。。。 无套一时爽，XXxXX。。。 公司电脑不加密 笔记本或者U盘不小心丢了会上新闻的人，在公司里占了大多数。。。区别只在于，上科技新闻，娱乐新闻还是联播新闻。。。 如果需要在存储上保存保密内容，请先对存储本身加密。更安全的，你需要对整个系统做签署。硬盘加密保护的是数据机密性，系统签署保护的是可信环境，两者相辅相成。 PS: 很多人电脑是加密的。手机呢？ 工具链用的全是非开源产品，还都是盗版的 X，这年头盗版和免费软件（尤其是国产盗版和免费软件）简直是黑产样本大全。 如果你要用软件，请付费。如果不想付钱，用开源。而且建议简单看一下源码。用免费版的，你自己就是产品。 安全无所谓拉 反正只要不是我故意搞出来的，出问题最多被骂一顿了事。还是关心怎么赚钱升职走上人生巅峰比较重要。 这TM怎么骂？这是极其NB正确无比的人生观，我连下嘴的地方都没有。</p>

          

        

    </article>
    
    <article>

        
        

<header>
    <h1 class="entry-title">
        <a href="http://shell909090.org/blog/archives/2787/">使用tmate和mdp做培训</a>
    </h1>
    <p class="meta">Sep 17, 2015
         - 1 minute read 
         - <a href="http://shell909090.org/blog/archives/2787/#disqus_thread">Comments</a>

        
    </p>
</header>


        
          <p>tmate 其实很简单。有个大家都玩过tmux对吧。有个x炸天的工具，叫做tmate，是tmux的分支。地址在 这里 。 这个工具能做什么呢？开一个tmux的窗口，连接一台服务器，得到一个ssh指令。然后，其他人可以用这条ssh指令直接查看你的tmux，只读或共享操作都可以(我建议只读)。 这个工具进入了debian的testing和sid，但是没有进stable。所以要装一堆依赖编译一下。总之，最后是一个静态的binary文件，复制去bin目录下结束，没什么好废话的。 自建服务器 tmate官方提供了一组公开服务器，供大家使用。当然，这些对我等大局域网居民来说是没用的。所以follow the guide(官方主页上有)，在自己的vps上搭建一个服务器。当然，22端口要改成其他端口。 然后填一个设定文件(也在官方主页上)，你就能使用tmate连接自己的服务器了。fingerprint的扫描方法大概是，在tmate-slave目录下执行： ssh-keygen -lf keys/ssh\_host\_dsa\_key ssh-keygen -lf keys/ssh\_host\_rsa\_key ssh-keygen -lf keys/ssh\_host\_ecdsa\_key 会得到三个fingerprint，写到客户端的配置里去。 唯一需要注意的是，除了tmate的配置文件里面需要设定三个fingerprint，你还得用ssh连接一下自己的这些服务器，并同意将fp添加到~/.ssh/known_host。不然也会有错误。 然后tmate，就能看到ssh指令了。 客户的连接 在tmate的窗口里，敲 tmate show-message ，你能够看到只读和读写ssh指令。这条指令里会有一个非常复杂的username，这个username是用作客户的身份验证的。虽然信息量并不是很大，但是作为临时的会话共享安全手段足够了。 注意如果你使用只读指令分享了屏幕，那么在操作过程中不应该再敲这条指令。否则别人就能看到读写ssh指令。 后面的事情就非常简单了，客户自己用ssh工具来连就行了。tmate对客户端没有任何要求。 mdp tmate解决了pair work和屏幕分享的问题。但是要用于培训的话，我们还缺一个slide手段。 mdp 是一个命令行的slide工具(当然你也可以用tpp)。基本是基于markdown的。你可以按照官方文档来做一个slide，然后就可以很happy的和小伙伴们分享屏幕操作了。 还缺什么 其实最好还要有一个语音共享机制的，例如YY语音。 性能如何 还没测。我在同组的三个人之间试了一回，非常好用。大量的用户还没测。等测下来再写一篇。</p>

          

        

    </article>
    
    
    




<div class="pagination">

    
        
        
        
        <a href="/" aria-label="First" class="label-pagination"><i class="fa fa-angle-double-left fa-lg"></i></a>
    

    
    
        <a href="/" aria-label="Previous" class="label-pagination"><i class="fa fa-angle-left fa-lg"></i></a>
    

    
        <a href="/" class="label-pagination">1</a>
    
        <a href="/page/2/" class="label-pagination">2</a>
    
        <a href="/page/3/" class="label-pagination">3</a>
    
        <a href="/page/4/" class="label-pagination">4</a>
    
        <a href="/page/5/" class="label-pagination">5</a>
    
        <a href="/page/6/" class="label-pagination">6</a>
    
        <a href="/page/7/" class="label-pagination">7</a>
    
        <a href="/page/8/" class="label-pagination">8</a>
    
        <a href="/page/9/" class="label-pagination">9</a>
    
        <a href="/page/10/" class="label-pagination">10</a>
    
        <a href="/page/11/" class="label-pagination">11</a>
    
        <a href="/page/12/" class="label-pagination">12</a>
    
        <a href="/page/13/" class="label-pagination">13</a>
    
        <a href="/page/14/" class="label-pagination">14</a>
    
        <a href="/page/15/" class="label-pagination">15</a>
    
        <a href="/page/16/" class="label-pagination">16</a>
    
        <a href="/page/17/" class="label-pagination">17</a>
    
        <a href="/page/18/" class="label-pagination">18</a>
    
        <a href="/page/19/" class="label-pagination">19</a>
    
        <a href="/page/20/" class="label-pagination">20</a>
    
        <a href="/page/21/" class="label-pagination">21</a>
    
        <a href="/page/22/" class="label-pagination">22</a>
    
        <a href="/page/23/" class="label-pagination">23</a>
    
        <a href="/page/24/" class="label-pagination">24</a>
    
        <a href="/page/25/" class="label-pagination">25</a>
    
        <a href="/page/26/" class="label-pagination">26</a>
    
        <a href="/page/27/" class="label-pagination">27</a>
    
        <a href="/page/28/" class="label-pagination">28</a>
    
        <a href="/page/29/" class="label-pagination">29</a>
    
        <a href="/page/30/" class="label-pagination">30</a>
    
        <a href="/page/31/" class="label-pagination">31</a>
    
        <a href="/page/32/" class="label-pagination">32</a>
    
        <a href="/page/33/" class="label-pagination">33</a>
    
        <a href="/page/34/" class="label-pagination">34</a>
    
        <a href="/page/35/" class="label-pagination">35</a>
    
        <a href="/page/36/" class="label-pagination">36</a>
    
        <a href="/page/37/" class="label-pagination">37</a>
    
        <a href="/page/38/" class="label-pagination">38</a>
    
        <a href="/page/39/" class="label-pagination">39</a>
    
        <a href="/page/40/" class="label-pagination">40</a>
    
        <a href="/page/41/" class="label-pagination">41</a>
    
        <a href="/page/42/" class="label-pagination">42</a>
    
        <a href="/page/43/" class="label-pagination">43</a>
    
        <a href="/page/44/" class="label-pagination">44</a>
    
        <a href="/page/45/" class="label-pagination">45</a>
    
        <a href="/page/46/" class="label-pagination">46</a>
    
        <a href="/page/47/" class="label-pagination">47</a>
    
        <a href="/page/48/" class="label-pagination">48</a>
    
        <a href="/page/49/" class="label-pagination">49</a>
    
        <a href="/page/50/" class="label-pagination">50</a>
    
        <a href="/page/51/" class="label-pagination">51</a>
    
        <a href="/page/52/" class="label-pagination">52</a>
    
        <a href="/page/53/" class="label-pagination">53</a>
    
        <a href="/page/54/" class="label-pagination">54</a>
    
        <a href="/page/55/" class="label-pagination">55</a>
    
        <a href="/page/56/" class="label-pagination">56</a>
    
        <a href="/page/57/" class="label-pagination">57</a>
    
        <a href="/page/58/" class="label-pagination">58</a>
    
        <a href="/page/59/" class="label-pagination">59</a>
    
        <a href="/page/60/" class="label-pagination">60</a>
    
        <a href="/page/61/" class="label-pagination">61</a>
    
        <a href="/page/62/" class="label-pagination">62</a>
    
        <a href="/page/63/" class="label-pagination">63</a>
    
        <a href="/page/64/" class="label-pagination">64</a>
    
        <a href="/page/65/" class="label-pagination">65</a>
    
        <a href="/page/66/" class="label-pagination">66</a>
    
        <a href="/page/67/" class="label-pagination">67</a>
    
        <a href="/page/68/" class="label-pagination">68</a>
    
        <a href="/page/69/" class="label-pagination">69</a>
    
        <a href="/page/70/" class="label-pagination">70</a>
    
        <a href="/page/71/" class="label-pagination">71</a>
    
        <a href="/page/72/" class="label-pagination">72</a>
    
        <a href="/page/73/" class="label-pagination">73</a>
    
        <a href="/page/74/" class="label-pagination">74</a>
    
        <a href="/page/75/" class="label-pagination">75</a>
    
        <a href="/page/76/" class="label-pagination">76</a>
    
        <a href="/page/77/" class="label-pagination">77</a>
    
        <a href="/page/78/" class="label-pagination">78</a>
    
        <a href="/page/79/" class="label-pagination">79</a>
    
        <a href="/page/80/" class="label-pagination">80</a>
    
        <a href="/page/81/" class="label-pagination">81</a>
    
        <a href="/page/82/" class="label-pagination">82</a>
    
        <a href="/page/83/" class="label-pagination">83</a>
    
        <a href="/page/84/" class="label-pagination">84</a>
    
        <a href="/page/85/" class="label-pagination">85</a>
    
        <a href="/page/86/" class="label-pagination">86</a>
    
        <a href="/page/87/" class="label-pagination">87</a>
    
        <a href="/page/88/" class="label-pagination">88</a>
    
        <a href="/page/89/" class="label-pagination">89</a>
    
        <a href="/page/90/" class="label-pagination">90</a>
    
        <a href="/page/91/" class="label-pagination">91</a>
    

    
    
        <a href="/page/3/" aria-label="Next" class="label-pagination"><i class="fa fa-angle-right fa-lg"></i></a>
    

    
    
        <a href="/page/91/" aria-label="Last"><i class="fa fa-angle-double-right fa-lg"></i></a>
    

</div>

  

  </div>

  

<aside class="sidebar thirds">
  <section class="first odd">

    

    <p>
      
    </p>
  </section>



  
  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
      
      
      
       
      
      
      
      
      

    
    
    </li>
  </ul>

  

  

  
  
  
    <section class="even">
      <h1>Recent Posts</h1>
      <ul id="recent_posts">
        
          <li class="post">
            <a href="/blog/archives/2840/">使用Jupyter制作slides</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2839/">CentOS 6下安装Python2.7</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2838/">gpg pubkey ID碰撞</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2837/">更换blog声明</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2836/">Pulau Perhentian</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2835/">唐僧被吃了</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2832/">三亚潜水体验</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2829/">潜水的一些简单解说</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2822/">一个有趣的问题</a>
          </li>
        
          <li class="post">
            <a href="/blog/archives/2820/">一次升级故障的排查</a>
          </li>
        
      </ul>
    </section>
  

</aside>
    
 </div>
</div>

<footer role="contentinfo">
  <p>Copyright &copy; 2016  - <a href="http://shell909090.org/license/">License</a> -
  <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.
</p>

</footer>


</body>
</html>
   
